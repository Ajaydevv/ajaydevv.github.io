var v=(t,g,i)=>new Promise((n,u)=>{var j=r=>{try{c(i.next(r))}catch(d){u(d)}},b=r=>{try{c(i.throw(r))}catch(d){u(d)}},c=r=>r.done?n(r.value):Promise.resolve(r.value).then(j,b);c((i=i.apply(t,g)).next())});import{j as e}from"./ui-CdYL37x2.js";import{r as p}from"./vendor-BcaInPIV.js";import{c as k,u as L,B as y,a as o,L as a,P as f,U as _}from"./index-kiFB1KWx.js";import{C as x,a as h,b as w,c as U,d as E}from"./card-BTbanT-y.js";import{H as S,M as C,B}from"./badge-B8STFIvR.js";import{s as T}from"./database-5uaZxkko.js";import"./supabase-cZfeQMuK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=k("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=k("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function J(){const{user:t}=L(),[g,i]=p.useState([]),[n,u]=p.useState({totalStories:0,totalLikes:0,totalComments:0,totalUsers:0}),[j,b]=p.useState(!0);p.useEffect(()=>{c()},[t]);const c=()=>v(this,null,function*(){try{const s=yield T.getStories(t==null?void 0:t.id);i(s.slice(0,3));const l=s.length,A=s.reduce((m,N)=>m+(N.likes_count||0),0),z=s.reduce((m,N)=>m+(N.comments_count||0),0),D=new Set(s.map(m=>m.author_id)).size;u({totalStories:l,totalLikes:A,totalComments:z,totalUsers:D})}catch(s){console.error("Error loading dashboard data:",s)}finally{b(!1)}}),r=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=[{label:"Total Stories",value:n.totalStories.toString(),icon:y,color:"text-blue-600"},{label:"Total Likes",value:n.totalLikes.toString(),icon:S,color:"text-red-500"},{label:"Total Comments",value:n.totalComments.toString(),icon:C,color:"text-green-600"},{label:"Active Writers",value:n.totalUsers.toString(),icon:H,color:"text-purple-600"}];return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("section",{className:"text-center py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blog-primary via-blog-accent to-blog-primary bg-clip-text text-transparent mb-6 animate-scale-in",children:"Welcome to AjayDev's Stories App"}),e.jsx("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Discover amazing stories from our community. Feel free to leave comments and likes to show your appreciation for great storytelling!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(o,{asChild:!0,size:"lg",className:"blog-gradient hover:opacity-90 transition-opacity shadow-blog-elegant",children:e.jsxs(a,{to:"/stories",children:[e.jsx(y,{className:"mr-2 h-5 w-5"}),"Explore All Stories"]})}),t?t.role==="admin"?e.jsx(o,{asChild:!0,variant:"outline",size:"lg",className:"border-blog-primary/20 hover:bg-blog-primary/5",children:e.jsxs(a,{to:"/create-story",children:[e.jsx(f,{className:"mr-2 h-5 w-5"}),"Write Your Story"]})}):null:e.jsx(o,{asChild:!0,variant:"outline",size:"lg",className:"border-blog-primary/20 hover:bg-blog-primary/5",children:e.jsx(a,{to:"/auth/signup",children:"Join Our Community"})})]})]})}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Community Dashboard"}),j?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((s,l)=>e.jsx(x,{className:"text-center animate-pulse",children:e.jsxs(h,{className:"pt-6",children:[e.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})},l))}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map((s,l)=>e.jsx(x,{className:"text-center shadow-blog-card hover:shadow-blog-elegant transition-all duration-300 hover:scale-105 animate-fade-in",style:{animationDelay:`${l*.1}s`},children:e.jsxs(h,{className:"pt-6",children:[e.jsx(s.icon,{className:`w-8 h-8 mx-auto mb-2 ${s.color}`}),e.jsx("div",{className:"text-2xl font-bold text-blog-primary",children:s.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.label})]})},s.label))})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Recent Stories"}),e.jsx(o,{asChild:!0,variant:"outline",children:e.jsx(a,{to:"/stories",children:"View All Stories"})})]}),j?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((s,l)=>e.jsxs(x,{className:"animate-pulse",children:[e.jsxs(w,{children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]}),e.jsx(h,{children:e.jsx("div",{className:"h-4 bg-gray-200 rounded"})})]},l))}):g.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((s,l)=>e.jsxs(x,{className:"story-card overflow-hidden group animate-fade-in hover:shadow-lg transition-all duration-300",style:{animationDelay:`${l*.1}s`},children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(B,{variant:"secondary",className:"text-xs",children:"Story"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),s.likes_count||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),s.comments_count||0]})]})]}),e.jsx(U,{className:"text-xl line-clamp-2 group-hover:text-blog-primary transition-colors",children:e.jsx(a,{to:"/stories",className:"hover:underline",children:s.title})}),e.jsxs(E,{className:"line-clamp-3",children:[s.content.substring(0,150),"..."]})]}),e.jsx(h,{className:"pt-0",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),s.author_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),r(s.created_at)]})]})})]},s.id))}):e.jsx(x,{className:"text-center py-12",children:e.jsxs(h,{children:[e.jsx(y,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Stories Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Be the first to share a story with our community!"}),t&&e.jsx(o,{asChild:!0,children:e.jsxs(a,{to:"/create-story",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Write the First Story"]})})]})})]}),e.jsx("section",{className:"text-center py-12 px-4 bg-gradient-to-r from-blog-muted/50 to-blog-surface rounded-2xl",children:t?t.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Ready to Share Your Story?"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"As an administrator, you can create and share stories with the community!"}),e.jsx(o,{asChild:!0,size:"lg",className:"blog-gradient hover:opacity-90 transition-opacity",children:e.jsxs(a,{to:"/create-story",children:[e.jsx(f,{className:"mr-2 h-5 w-5"}),"Create New Story"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Welcome to Our Community!"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Enjoy reading amazing stories, leave likes and comments to show your appreciation!"}),e.jsx(o,{asChild:!0,size:"lg",className:"blog-gradient hover:opacity-90 transition-opacity",children:e.jsxs(a,{to:"/stories",children:[e.jsx(y,{className:"mr-2 h-5 w-5"}),"Explore Stories"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Join to like and comment on Ajaydev's stories"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Sign up today to share your thoughts, connect with other Ajaydev, and engage with amazing content!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(o,{asChild:!0,size:"lg",className:"blog-gradient hover:opacity-90 transition-opacity",children:e.jsx(a,{to:"/auth/signup",children:"Get Started Today"})}),e.jsx(o,{asChild:!0,variant:"outline",size:"lg",children:e.jsx(a,{to:"/auth/signin",children:"Already have an account?"})})]})]})})]})}export{J as default};
